var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,r=(t,a,l)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[a]=l,o=(e,t)=>{for(var a in t||(t={}))n.call(t,a)&&r(e,a,t[a]);if(l)for(var a of l(t))s.call(t,a)&&r(e,a,t[a]);return e},c=(e,l)=>t(e,a(l));import{h as i,j as m,R as p,k as d,r as u,l as E,q as f,A as b,aq as h,ar as y,as as g,at as C,au as w,av as O,M as v,E as j,G as k,J as S,K as P,N as x,V as q,O as A}from"./vendor.3bf5fbfd.js";import{e as F}from"./index.a49ff53c.js";import{F as z}from"./form-item.ff11e240.js";import"./index.fc04bfad.js";const D={id:0,path:"",password:"",hide:"",upload:!1},G=()=>{const e=i(),{t:t}=m(),[a,l]=p.useState([]),[n,s]=p.useState(D),[r,G]=p.useState(!1),[H,I]=p.useState(!1),J=d(),K=()=>{I(!0),F.get("metas").then((a=>{I(!1);const n=a.data;200!==n.code?e({title:t(n.message),status:"error",duration:3e3,isClosable:!0}):l(n.data)}))};return u.exports.useEffect((()=>{K()}),[]),p.createElement(E,{w:"full"},p.createElement(f,null,p.createElement(b,{onClick:()=>{s(D),G(!1),J.onOpen()}},t("add")),p.createElement(b,{colorScheme:"orange",isLoading:H,onClick:()=>{K()}},t("refresh"))),p.createElement(E,{overflowX:"auto"},p.createElement(h,{w:"full"},p.createElement(y,null,p.createElement(g,null,p.createElement(C,null,t("path")),p.createElement(C,null,t("password")),p.createElement(C,null,t("hide")),p.createElement(C,null,t("upload")),p.createElement(C,null,t("operation")))),p.createElement(w,null,a.map((a=>p.createElement(g,{key:a.path},p.createElement(O,null,a.path),p.createElement(O,null,a.password),p.createElement(O,null,a.hide),p.createElement(O,null,a.upload?"true":"false"),p.createElement(O,{whiteSpace:"nowrap"},p.createElement(b,{onClick:()=>{s(a),G(!0),J.onOpen()}},t("edit")),p.createElement(b,{colorScheme:"red",ml:"1",onClick:()=>{F.delete("meta",{params:{id:a.id}}).then((a=>{const l=a.data;200!==l.code?e({title:t(l.message),status:"error",duration:3e3,isClosable:!0}):(e({title:t(l.message),status:"success",duration:3e3,isClosable:!0}),K())}))}},t("delete"))))))))),p.createElement(v,{isOpen:J.isOpen,onClose:J.onClose,size:"6xl"},p.createElement(j,null),p.createElement(k,null,p.createElement(S,null,t(r?"save":"add")),p.createElement(P,null),p.createElement(x,{pb:6},p.createElement(q,{spacing:"2"},[{name:"path",description:"Path",type:"string"},{name:"password",description:"Password",type:"string"},{name:"hide",description:"Hide Files(split by ,)",type:"string"},{name:"upload",description:"Allow visitors to upload",type:"bool"}].map((e=>p.createElement(z,{key:e.name,label:e.name,type:e.type,description:e.description,value:n[e.name],required:"path"===e.name,onChange:t=>{"bool"!==e.type?s(c(o({},n),{[e.name]:t})):s(c(o({},n),{[e.name]:!n[e.name]}))}}))))),p.createElement(A,null,p.createElement(b,{mr:3,colorScheme:"gray",onClick:J.onClose},t("cancle")),p.createElement(b,{onClick:()=>{F.post("meta/"+(r?"save":"create"),n).then((a=>{const l=a.data;200!==l.code?(e({title:t(l.message),status:"error",duration:3e3,isClosable:!0}),r||(K(),J.onClose())):(e({title:t(l.message),status:"success",duration:3e3,isClosable:!0}),K(),J.onClose())}))}},t("save"))))))};export{G as default};
